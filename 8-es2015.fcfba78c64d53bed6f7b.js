(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"cbu+":function(t,e,r){"use strict";r.r(e),r.d(e,"GeoMapNavigationModule",(function(){return b}));var i=r("mrSG"),n=r("Vbab"),s=r("qsmv"),a=r("tgCk"),o=r("XNiG"),u=r("VRyK"),c=r("xgIS"),h=r("1G5W"),d=r("pLZG"),l=r("ZIGy"),m=r("fXoL");r("DWdG");const{CITY:v}=a.a;let O=(()=>{class t{constructor(t,e){this.host=t,this.elementRef=e,this.tabindex=0,this.destroy$=new o.a}get INSTRUCTIONS(){return Object(n.h)(n.d.INSTRUCTIONS)}get data(){return this.host.data}get unit(){return this.host.unit}set unit(t){this.host.unit=t}get filteringTerritory(){return this.host.filteringTerritory}set filteringTerritory(t){this.host.filteringTerritory=t}get keywordElement(){return this.host.keywordRef.nativeElement}get activeDatumIndex(){return this.host.activeDatumIndex}set activeDatumIndex(t){this.host.activeDatumIndex=t}get activeMeasureIndex(){return this.host.activeMeasureIndex}set activeMeasureIndex(t){this.host.activeMeasureIndex=t}get measureNames(){return this.host.measureNames}get i18nActiveDatumArgs(){const t=this.data[this.activeDatumIndex];if(!t)return null;const e=this.measureNames[this.activeMeasureIndex];return{territory:t.territory.name,value:Object(l.b)(t.values[e]),measure:Object(l.c)(e)}}focus(){this.elementRef.nativeElement.focus()}handleKeyDown(t){var e,r,n,s;return Object(i.a)(this,void 0,void 0,(function*(){const{key:i,shiftKey:a,altKey:o,ctrlKey:u,metaKey:c}=t;if(o||u||c||"Tab"===i)return!1;switch(t.preventDefault(),t.stopPropagation(),i){case"-":case"_":return this.unit=Math.max(this.unit-1,null!==(r=null===(e=this.filteringTerritory)||void 0===e?void 0:e.level)&&void 0!==r?r:0),this.readOutUnitAndFilteringTerritory();case"+":case"=":return this.unit=Math.min(this.unit+1,v),this.readOutUnitAndFilteringTerritory();case"Enter":if(a)this.filteringTerritory=null!==(s=null===(n=this.filteringTerritory)||void 0===n?void 0:n.parent)&&void 0!==s?s:null;else{if(!(this.activeDatumIndex>=0))return this.readOutNothingSelected();this.filteringTerritory=this.data[this.activeDatumIndex].territory}return this.readOutUnitAndFilteringTerritory();case"/":return this.keywordElement.focus(),!0;case"ArrowDown":return this.activeDatumIndex=Math.min(this.activeDatumIndex+1,this.data.length-1),this.readOutActiveDatum();case"ArrowUp":return this.activeDatumIndex=Math.max(this.activeDatumIndex-1,0),this.readOutActiveDatum();case"ArrowRight":return this.activeMeasureIndex=Math.min(this.activeMeasureIndex+1,this.measureNames.length-1),this.readOutActiveMeasure();case"ArrowLeft":return this.activeMeasureIndex=Math.max(this.activeMeasureIndex-1,0),this.readOutActiveMeasure();case"?":return this.readOutInstructions();default:return!1}}))}handleFocus(){return this.readOutUnitAndFilteringTerritory()}handleBlur(){this.activeDatumIndex=-1,this.activeMeasureIndex=-1}ngOnInit(){this.screenReaderComponent.breakSilence(Object(n.i)(n.a.BREAK_SILENCE)),Object(u.a)(this.host.filteringTerritory$.pipe(Object(h.a)(this.destroy$)),Object(c.a)(this.keywordElement,"keydown").pipe(Object(h.a)(this.destroy$)).pipe(Object(d.a)(t=>"Escape"===t.key))).subscribe(()=>{this.focus()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}readOutNothingSelected(){return this.screenReaderComponent.readOut(Object(n.h)(n.d.NOTHING_SELECTED))}readOutUnitAndFilteringTerritory(){const{hierarchicalTerritories:t}=this.host;return this.screenReaderComponent.readOut(Object(n.h)(n.d.UNIT_AND_FILTERING_TERRITORY,{unit:Object(l.d)(this.unit,!0),hierarchical_territories:t.length>0?t.reverse().map(t=>t.name).join(", "):"the world"}))}readOutActiveDatum(){return Object(i.a)(this,void 0,void 0,(function*(){const{i18nActiveDatumArgs:t}=this;return null!==t&&this.screenReaderComponent.readOut(Object(n.h)(n.d.ACTIVE_DATUM,t))}))}readOutActiveMeasure(){return Object(i.a)(this,void 0,void 0,(function*(){const{i18nActiveDatumArgs:t}=this;if(null===t){const t=this.measureNames[this.activeMeasureIndex];return this.screenReaderComponent.readOut(Object(l.c)(t))}return this.screenReaderComponent.readOut(Object(n.h)(n.d.ACTIVE_MEASURE,t))}))}readOutInstructions(){return this.screenReaderComponent.readOut(Object(n.i)(n.d.INSTRUCTIONS))}}return t.\u0275fac=function(e){return new(e||t)(m.Ob("host"),m.Ob(m.l))},t.\u0275cmp=m.Ib({type:t,selectors:[["app-geo-map-navigation"]],viewQuery:function(t,e){var r;1&t&&m.wc(s.a,!0),2&t&&m.oc(r=m.dc())&&(e.screenReaderComponent=r.first)},hostVars:1,hostBindings:function(t,e){1&t&&m.cc("keydown",(function(t){return e.handleKeyDown(t)}))("focus",(function(t){return e.handleFocus(t)}))("blur",(function(t){return e.handleBlur(t)})),2&t&&m.Db("tabindex",e.tabindex)},inputs:{enabled:"enabled"},decls:2,vars:1,consts:[["aria-hidden","true",1,"instructions",3,"innerHTML"]],template:function(t,e){1&t&&(m.Pb(0,"div",0),m.Pb(1,"app-screen-reader")),2&t&&m.lc("innerHTML",e.INSTRUCTIONS,m.rc)},directives:[s.a],styles:["[_nghost-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]:not(:first-child){border-top:1px solid #dadce0}[_nghost-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:12px;line-height:2em;margin-bottom:.5rem}"]}),t})();var g=r("ofXK"),f=r("gFbo");let b=(()=>{class t{constructor(){this.A11yComponent=O}}return t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({factory:function(e){return new(e||t)},imports:[[g.c,f.a]]}),t})()}}]);